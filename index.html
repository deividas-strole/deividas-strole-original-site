import React, { useState, useEffect } from 'react';
import { Github, Linkedin, Mail, Menu, X, ExternalLink, Code, Briefcase, GraduationCap, MapPin, Phone } from 'lucide-react';

export default function Portfolio() {
  const [scrolled, setScrolled] = useState(false);
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
  const [activeSection, setActiveSection] = useState('home');
  const [loaded, setLoaded] = useState(false);

  useEffect(() => {
    setLoaded(true);
    
    const handleScroll = () => {
      setScrolled(window.scrollY > 50);
      
      const sections = ['home', 'about', 'experience', 'education', 'contact'];
      const current = sections.find(section => {
        const element = document.getElementById(section);
        if (element) {
          const rect = element.getBoundingClientRect();
          return rect.top <= 100 && rect.bottom >= 100;
        }
        return false;
      });
      if (current) setActiveSection(current);
    };

    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const scrollToSection = (sectionId) => {
    const element = document.getElementById(sectionId);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth' });
      setMobileMenuOpen(false);
    }
  };

  const technologies = [
    'Java', 'JavaScript', 'Python', 'C#', 'C++', 'Dart', 'Kotlin', 'CSS', 'HTML', 'SQL',
    'Spring', 'Thymeleaf', 'Hibernate', 'JSP', 'Bootstrap', 'Flutter', 'AWS', 
    'Google Cloud', 'MongoDB', 'Postgres', 'React', 'Maven', 'Gradle'
  ];

  const experience = [
    {
      title: 'Full Stack Developer',
      company: 'WMGS',
      period: 'October 2024 - Present (7 months)',
      responsibilities: [
        'Designed and developed backend services for core features of the FunnelSensAI SaaS platform using Java, Spring Boot, Hibernate, MySQL, and JSON for data exchange',
        'Integrated and validated RESTful APIs with Postman; implemented automated testing using JUnit 5 and Mockito',
        'Built responsive UI with React, JavaScript, and CSS, aligning with Figma-based designs',
        'Used Git and GitHub for branching, pull requests, and code reviews to maintain quality and streamline deployment'
      ]
    },
    {
      title: 'Web Developer',
      company: 'Visitor Maker',
      period: 'January 2015 - September 2024 (9 years 9 months)',
      responsibilities: [
        'Developed and maintained a dynamic website using WordPress, integrating custom features with HTML and CSS for responsive design',
        'Optimized the site for search engines by implementing effective SEO strategies, improving visibility and performance',
        'Handled full deployment process, including installing the website on a server and configuring necessary server settings',
        'Managed site security and implemented essential privacy, cookie, and GDPR policies to ensure compliance and protect user data',
        'Took ownership of general website maintenance, performance monitoring, and ongoing improvements to meet evolving business needs'
      ]
    },
    {
      title: 'Web Developer',
      company: 'JetWait',
      period: 'January 2017 - April 2020 (3 years 4 months)',
      responsibilities: [
        'Designed and implemented a custom website using WordPress, enhancing layout and functionality with HTML and CSS to ensure a responsive, user-friendly experience',
        'Improved the site\'s search engine ranking through tailored SEO practices, including metadata optimization and performance tuning',
        'Deployed the site to a production web server, handling configuration and troubleshooting during the setup process',
        'Established security protocols and incorporated compliance policies such as GDPR, cookie consent, and privacy terms',
        'Provided ongoing site updates and maintenance, addressing bugs, performance issues, and evolving content requirements'
      ]
    }
  ];

  const education = [
    {
      degree: 'Master\'s degree',
      field: 'Computer Software Engineering',
      school: 'National University'
    },
    {
      degree: 'Bachelor of Science - BS',
      field: 'Computer Science',
      school: 'California State University, Northridge'
    },
    {
      degree: 'Bachelor of Science - BS',
      field: 'Informatics Systems',
      school: 'Vytauto Didžiojo universitetas'
    }
  ];

  const certifications = [
    {
      title: 'Full-Stack Web Development',
      organization: 'Coders Campus'
    },
    {
      title: 'Training for Spring Certified Professional',
      organization: 'Broadcom Spring Academy'
    }
  ];

  return (
    <div className="min-h-screen bg-white text-gray-900">
      <style>{`
        @keyframes slideInFromLeft {
          from {
            opacity: 0;
            transform: translateX(-100px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }
        .slide-in {
          animation: slideInFromLeft 0.8s ease-out forwards;
        }
        .slide-in-delay-1 {
          animation: slideInFromLeft 0.8s ease-out 0.2s forwards;
          opacity: 0;
        }
        .slide-in-delay-2 {
          animation: slideInFromLeft 0.8s ease-out 0.4s forwards;
          opacity: 0;
        }
        .slide-in-delay-3 {
          animation: slideInFromLeft 0.8s ease-out 0.6s forwards;
          opacity: 0;
        }
        .slide-in-delay-4 {
          animation: slideInFromLeft 0.8s ease-out 0.8s forwards;
          opacity: 0;
        }
        .nav-link {
          position: relative;
          transition: color 0.3s;
        }
        .nav-link::after {
          content: '';
          position: absolute;
          bottom: -4px;
          left: 0;
          width: 0;
          height: 2px;
          background: #2563eb;
          transition: width 0.3s;
        }
        .nav-link:hover::after,
        .nav-link.active::after {
          width: 100%;
        }
        .card {
          transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
          transform: translateY(-8px);
          box-shadow: 0 20px 40px rgba(37, 99, 235, 0.15);
        }
        .skill-tag {
          transition: all 0.3s;
        }
        .skill-tag:hover {
          background: #2563eb;
          color: white;
          transform: scale(1.05);
        }
        .btn-primary {
          transition: all 0.3s;
        }
        .btn-primary:hover {
          transform: scale(1.05);
          box-shadow: 0 10px 25px rgba(37, 99, 235, 0.3);
        }
        .social-icon {
          transition: all 0.3s;
        }
        .social-icon:hover {
          transform: translateY(-4px);
          color: #2563eb;
        }
      `}</style>

      {/* Navigation */}
      <nav className={`fixed top-0 w-full z-50 transition-all duration-300 ${scrolled ? 'bg-white shadow-md' : 'bg-white/95'}`}>
        <div className="max-w-6xl mx-auto px-6 py-4">
          <div className="flex justify-between items-center">
            <button 
              onClick={() => scrollToSection('home')} 
              className={`text-2xl font-bold text-blue-600 hover:text-blue-700 transition-all ${loaded ? 'slide-in' : ''}`}
            >
              DS
            </button>
            
            {/* Desktop Menu */}
            <div className={`hidden md:flex space-x-8 ${loaded ? 'slide-in-delay-1' : ''}`}>
              {['home', 'about', 'experience', 'education', 'contact'].map(section => (
                <button
                  key={section}
                  onClick={() => scrollToSection(section)}
                  className={`nav-link capitalize font-medium ${activeSection === section ? 'active text-blue-600' : 'text-gray-700 hover:text-blue-600'}`}
                >
                  {section}
                </button>
              ))}
            </div>

            {/* Mobile Menu Button */}
            <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className="md:hidden text-gray-900">
              {mobileMenuOpen ? <X /> : <Menu />}
            </button>
          </div>

          {/* Mobile Menu */}
          {mobileMenuOpen && (
            <div className="md:hidden mt-4 pb-4 space-y-3">
              {['home', 'about', 'experience', 'education', 'contact'].map(section => (
                <button
                  key={section}
                  onClick={() => scrollToSection(section)}
                  className="block w-full text-left capitalize text-gray-700 hover:text-blue-600 transition-colors font-medium"
                >
                  {section}
                </button>
              ))}
            </div>
          )}
        </div>
      </nav>

      {/* Hero Section */}
      <section id="home" className="min-h-screen flex items-center justify-center px-6 pt-20">
        <div className="max-w-4xl w-full">
          <h1 className={`text-5xl md:text-7xl font-bold mb-6 text-blue-600 ${loaded ? 'slide-in' : ''}`}>
            Deividas Strole
          </h1>
          <p className={`text-xl md:text-2xl text-gray-800 mb-8 ${loaded ? 'slide-in-delay-1' : ''}`}>
            Full-Stack Developer
          </p>
          <div className={`flex flex-col gap-3 mb-8 text-gray-700 ${loaded ? 'slide-in-delay-2' : ''}`}>
            <a href="tel:+14242720749" className="flex items-center gap-2 hover:text-blue-600 transition-colors">
              <Phone size={20} /> (424) 272-0749
            </a>
            <a href="mailto:deiwis@yahoo.com" className="flex items-center gap-2 hover:text-blue-600 transition-colors">
              <Mail size={20} /> deiwis@yahoo.com
            </a>
            <p className="flex items-center gap-2">
              <MapPin size={20} /> Sarasota, Florida, United States
            </p>
          </div>
          <div className={`flex flex-wrap gap-4 mb-12 ${loaded ? 'slide-in-delay-3' : ''}`}>
            <button
              onClick={() => scrollToSection('experience')}
              className="btn-primary px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold shadow-lg"
            >
              View Experience
            </button>
            <button
              onClick={() => scrollToSection('contact')}
              className="btn-primary px-8 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-lg font-semibold"
            >
              Get in Touch
            </button>
          </div>
          <div className={`flex gap-6 ${loaded ? 'slide-in-delay-4' : ''}`}>
            <a href="https://linkedin.com/in/deividas-strole" target="_blank" rel="noopener noreferrer" className="social-icon text-gray-700">
              <Linkedin size={28} />
            </a>
            <a href="https://github.com/deividas-strole" target="_blank" rel="noopener noreferrer" className="social-icon text-gray-700">
              <Github size={28} />
            </a>
          </div>
        </div>
      </section>

      {/* About Section */}
      <section id="about" className="py-20 px-6 bg-gray-50">
        <div className="max-w-5xl mx-auto">
          <h2 className="text-4xl font-bold mb-12 text-blue-600">
            About Me
          </h2>
          <div className="bg-white p-8 rounded-xl border-2 border-gray-200 shadow-sm mb-8">
            <p className="text-gray-700 leading-relaxed text-lg mb-6">
              I am a full-stack developer with a strong interest in AI, experienced in a range of technologies. 
              My expertise spans AI, full-stack development for web and mobile applications, and cloud integration.
            </p>
          </div>
          <div className="bg-white p-8 rounded-xl border-2 border-gray-200 shadow-sm">
            <h3 className="text-2xl font-semibold mb-6 flex items-center gap-2 text-gray-900">
              <Code className="text-blue-600" /> Technologies & Tools
            </h3>
            <div className="flex flex-wrap gap-3">
              {technologies.map(tech => (
                <span key={tech} className="skill-tag px-4 py-2 bg-gray-100 text-gray-800 rounded-lg text-sm font-medium border border-gray-200">
                  {tech}
                </span>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Experience Section */}
      <section id="experience" className="py-20 px-6">
        <div className="max-w-5xl mx-auto">
          <h2 className="text-4xl font-bold mb-12 text-blue-600">
            Work Experience
          </h2>
          <div className="space-y-8">
            {experience.map((job, idx) => (
              <div key={idx} className="card bg-white p-8 rounded-xl border-2 border-gray-200 shadow-sm">
                <div className="flex justify-between items-start mb-4 flex-wrap gap-2">
                  <div>
                    <h3 className="text-2xl font-bold text-blue-600">{job.title}</h3>
                    <p className="text-gray-700 font-semibold text-lg">{job.company}</p>
                  </div>
                  <span className="text-gray-600 font-medium">{job.period}</span>
                </div>
                <ul className="list-disc list-inside space-y-2 text-gray-700">
                  {job.responsibilities.map((resp, i) => (
                    <li key={i} className="leading-relaxed">{resp}</li>
                  ))}
                </ul>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Education Section */}
      <section id="education" className="py-20 px-6 bg-gray-50">
        <div className="max-w-5xl mx-auto">
          <h2 className="text-4xl font-bold mb-12 text-blue-600">
            Education & Certifications
          </h2>
          
          <h3 className="text-2xl font-semibold mb-6 flex items-center gap-2 text-gray-900">
            <GraduationCap className="text-blue-600" /> Education
          </h3>
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
            {education.map((edu, idx) => (
              <div key={idx} className="card bg-white p-6 rounded-xl border-2 border-gray-200 shadow-sm">
                <h4 className="text-lg font-bold text-blue-600 mb-2">{edu.degree}</h4>
                <p className="text-gray-800 font-semibold mb-1">{edu.field}</p>
                <p className="text-gray-600">{edu.school}</p>
              </div>
            ))}
          </div>

          <h3 className="text-2xl font-semibold mb-6 flex items-center gap-2 text-gray-900">
            <Briefcase className="text-blue-600" /> Certifications & Training
          </h3>
          <div className="grid md:grid-cols-2 gap-6">
            {certifications.map((cert, idx) => (
              <div key={idx} className="card bg-white p-6 rounded-xl border-2 border-gray-200 shadow-sm">
                <h4 className="text-lg font-bold text-gray-900 mb-2">{cert.title}</h4>
                <p className="text-gray-600">{cert.organization}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Contact Section */}
      <section id="contact" className="py-20 px-6">
        <div className="max-w-4xl mx-auto text-center">
          <h2 className="text-4xl font-bold mb-8 text-blue-600">
            Let's Connect
          </h2>
          <p className="text-xl text-gray-700 mb-12">
            I'm always open to new opportunities and collaborations.
          </p>
          <div className="flex flex-wrap justify-center gap-6 mb-12">
            <a href="mailto:deiwis@yahoo.com" className="btn-primary flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg shadow-lg font-semibold">
              <Mail size={20} /> Email Me
            </a>
            <a href="https://linkedin.com/in/deividas-strole" target="_blank" rel="noopener noreferrer" className="btn-primary flex items-center gap-2 px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-lg font-semibold">
              <Linkedin size={20} /> LinkedIn
            </a>
            <a href="https://github.com/deividas-strole" target="_blank" rel="noopener noreferrer" className="btn-primary flex items-center gap-2 px-6 py-3 bg-gray-900 hover:bg-gray-800 text-white rounded-lg font-semibold">
              <Github size={20} /> GitHub
            </a>
          </div>
          <div className="bg-gray-50 p-8 rounded-xl border-2 border-gray-200 inline-block">
            <div className="space-y-3 text-left">
              <p className="flex items-center gap-2 text-gray-700">
                <Phone size={20} className="text-blue-600" /> 
                <a href="tel:+14242720749" className="hover:text-blue-600 transition-colors">(424) 272-0749</a>
              </p>
              <p className="flex items-center gap-2 text-gray-700">
                <Mail size={20} className="text-blue-600" /> 
                <a href="mailto:deiwis@yahoo.com" className="hover:text-blue-600 transition-colors">deiwis@yahoo.com</a>
              </p>
              <p className="flex items-center gap-2 text-gray-700">
                <MapPin size={20} className="text-blue-600" /> 
                Sarasota, Florida, United States
              </p>
            </div>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-8 px-6 border-t border-gray-200 bg-gray-50">
        <div className="max-w-6xl mx-auto text-center text-gray-600">
          <p>© 2025 Deividas Strole. All rights reserved.</p>
        </div>
      </footer>
    </div>
  );
}
